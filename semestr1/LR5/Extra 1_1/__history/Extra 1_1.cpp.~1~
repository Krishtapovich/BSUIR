#pragma hdrstop
#pragma argsused

#ifdef _WIN32
#include <tchar.h>
#else
  typedef char _TCHAR;
  #define _tmain main
#endif
#include <conio.h>
#include <stdio.h>
#include <iostream>
using namespace std;

int** create_array(int rows, int columns) {
	int** arr = new int* [rows];
	for (int i = 0; i < rows; i++) {		//функция объявления двумерного динамического массива
		arr[i] = new int[columns];
	}
	return arr;
}

void filling_output_array(int **arr, int rows, int columns) {
	for (int i = 0; i < rows; i++)
	{
		for (int j = 0; j < columns; j++)				//заполнение массива
		{
			cout << "Array[" << i << "][" << j << "] = ";
			cin >> arr[i][j];
		}
	}

	for (int i = 0; i < rows; i++)
	{
		for (int j = 0; j < columns; j++)
		{
			cout << arr[i][j] << '\t';			//вывод массива
		}
		cout << endl << endl;
	}
}

void mult(int**arr, int rows, int columns) {
	int mult = 1;

	int* elements = new int[rows];
	for (int i = 0; i < rows; i++)			//объявление динамического массива и инициализия его единицами
	{
		elements[i] = 1;
	}

	for (int i = 0; i < rows; i++)
	{
		for (int j = 0; j < columns; j++)
		{
			if (i == j && arr[i][j] % 2 == 0)
			{
				elements[i] = arr[i][j];		//заполнение динамического массива четными элементами главной диагонали
			}
		}
	}

	for (int i = 0; i < rows; i++)
	{
		mult *= elements[i];				//произведение четных элементов главной диагонали
	}
	cout << "Product of even elements of the main diagonal: " << mult << endl;
	delete[]elements;
}

int _tmain() {
	int rows, columns;
	cout << "Enter number of rows of the array: ";
	cin >> rows;
	cout << "Enter number of columns of the array: ";
	cin >> columns;

	int** arr;

	arr = create_array(rows, columns);

	filling_output_array(arr, rows, columns);

	mult(arr, rows, columns);

	for (int i = 0; i < rows; i++)
	{
		delete[]arr[i];					//удаление двумерного динамического массива
	}
	delete[]arr;
	getch();
	return 0;
}
