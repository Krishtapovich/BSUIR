//---------------------------------------------------------------------------
#include <vcl.h>
#pragma hdrstop
#include "List.h"
#include "Unit1.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm1 *Form1;
List *lst = new List();
int size = 0;
void ShowList()
{
    Form1->Memo1->Lines->Clear();
	for (int i = 0; i < size; i++)
	{
		AnsiString str = IntToStr(i + 1) + ". " + lst->Country(i).c_str();
		str = str + "    " + lst->Team(i).c_str() + "    " +
			lst->Surname(i).c_str() + "    " + IntToStr(lst->Num(i)) + "    " + IntToStr(lst->Age(i)) + "    " + IntToStr(lst->Height(i)) +
			"    " + IntToStr(lst->Weight(i));
		Form1->Memo1->Lines->Add(str);
	}
}
//---------------------------------------------------------------------------
__fastcall TForm1::TForm1(TComponent* Owner) :TForm(Owner) {Memo1->Lines->Clear();}
//---------------------------------------------------------------------------
void __fastcall TForm1::Button2Click(TObject *Sender)
{
	AnsiString s;
	std::string country, team, surname;
	if(Edit1->Text == "")
	{
		ShowMessage("¬ведите название страны!");
		Edit1->Text = "";
	}else
	{
		s = Edit1->Text;
		country = s.c_str();
	}
	if(Edit2->Text == "")
	{
		ShowMessage("¬ведите название команды!");
		Edit2->Text = "";
	}else
	{
		s = Edit2->Text;
		team = s.c_str();
	}
	if(Edit3->Text == "")
	{
		ShowMessage("¬ведите фамилию!");
		Edit3->Text = "";
	}else
	{
		s = Edit3->Text;
		surname = s.c_str();
	}
	int num, age, height, weight;
	try
	{
		num = StrToInt(Edit4->Text);
		if(num <= 0)
		{
			ShowMessage("¬ведите корректный номер!");
			Edit4->Text = "";
		}
	}
	catch(...)
	{
		ShowMessage("¬ведите корректный номер!");
		Edit4->Text = "";
	}

	try
	{
		age = StrToInt(Edit5->Text);
		if(age <= 0)
		{
			ShowMessage("¬ведите корректный возраст!");
			Edit5->Text = "";
		}
	}
	catch(...)
	{
		ShowMessage("¬ведите корректный возраст!");
		Edit5->Text = "";
	}

    try
	{
		height = StrToInt(Edit6->Text);
		if(age <= 0)
		{
			ShowMessage("¬ведите корректный рост!");
			Edit6->Text = "";
		}
	}
	catch(...)
	{
		ShowMessage("¬ведите корректный рост!");
		Edit6->Text = "";
	}

    try
	{
		weight = StrToInt(Edit7->Text);
		if(age <= 0)
		{
			ShowMessage("¬ведите корректный вес!");
			Edit7->Text = "";
		}
	}
	catch(...)
	{
		ShowMessage("¬ведите корректный вес!");
		Edit7->Text = "";
	}
	if(country != "" && team != "" && surname != "" && age != 0 && height!= 0 && weight != 0)
	{
		lst->Add(country, team, surname, num, age, height, weight);
		size++;
		ComboBox1->Items->Add(size);
		ShowList();
	}
}
//---------------------------------------------------------------------------

